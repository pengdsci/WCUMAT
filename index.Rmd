---
title: "Comparing Students' Performance in MAT112 and MAT113"
author: "Department Mathematics"
date: '1/5/2024 '
output:
  html_document:
    toc: yes
    toc_float: yes
    toc_depth: 4
    fig_width: 6
    fig_caption: yes
    number_sections: yes
    theme: readable
  word_document:
    toc: yes
    toc_depth: '4'
  pdf_document:
    toc: yes
    toc_depth: 4
    fig_caption: yes
    number_sections: yes
    fig_width: 5
    fig_height: 4
---
<style type="text/css">

div#TOC li {
    list-style:none;
    background-image:none;
    background-repeat:none;
    background-position:0;
}
h1.title {
  font-size: 24px;
  font-family: Arial, sans-serif;
  color: navy;
  text-align: center;
}
h4.author { /* Header 4 - and the author and data headers use this too  */
    font-size: 18px;
  font-family: Arial, sans-serif;
  color: navy;
  text-align: center;
}
h4.date { /* Header 4 - and the author and data headers use this too  */
  font-size: 18px;
  font-family: Arial, sans-serif;
  color: DarkBlue;
  text-align: center;
}

h1 { /* Header 1  */
    font-size: 22px;
    font-family: Arial, sans-serif;
    color: navy;
    text-align: left;
}
h2 { /* Header 2  */
    font-size: 19px;
    font-family: Arial, sans-serif;
    color: navy;
    text-align: left;
}

h3 { /* Header 3   */
    font-size: 16px;
    font-family: Arial, sans-serif;
    color: navy;
    text-align: left;
}

</style>

```{r setup, include=FALSE}
if (!require("knitr")) {
   install.packages("knitr")
   library(knitr)
}
if (!require("tidyverse")) {
   install.packages("tidyverse")
   library(tidyverse)
}
if (!require("ggplot2")) {
   install.packages("ggplot2")
   library(ggplot2)
}
if (!require("plotly")) {
   install.packages("plotly")
   library(plotly)
}

knitr::opts_chunk$set(echo = FALSE,       
                      warning = FALSE,   
                      result = TRUE,   
                      message = FALSE)
```



<table border = 0 width="95%" align = "center" style="background-color:#ABCDEF;">
<tr><td>
<table border = 0 width="80%" align = "center">
<tr><td style="font-family: Georgia, serif; font-size:110%;">
<br><br>
<h2><center><font style="font-variant: small-caps;">Executive Summary</font></center></h2> 
<br>
This project used a semi-controlled experiment design in the data collection process to remove grading bias. Four instructors who taught **both** MAT112 **and** MAT113 in the fall semester of 2023 were invited to the study and their MAT112 and MAT113 classes were all included as the study sample. Students were recommended to MAT112 and MAT113 based on their PPL scores. However, students' enrollment into individual sections within MAT112 and MAT113 were considered to be random. All MAT112 and MAT113 sections used the same common exam. Each instructor was assigned a set of questions and graded them across all sections of MAT112 and MAT113. The Students' performance in these two courses was measured by the scores of the common exam.

In general, exam scores are influenced by various factors such as student preparedness (measured by PPL scores), instructors' strategies in teaching, and others. In this analysis, both visual and inferential methods were used to extract the true difference between mean exam scores in MAT112 and MAT113 with related effects caused due to other factors being removed. This true difference terms as the <font color = "red">*net performance gain*</font> in the academic performance due to the one extra credit hour added to MAT112.   

Some of the key findings are outlined in the following.

1. There was a solid evidence that MAT112 students outperformed MAT113 students with a <font color = "red">*net performance gain*</font> of nearly 11 points (out of 100).

2. MAT112 students had significantly lower PPL scores than their peers in MAT113.

3. The instructor's effect influenced the exam grade significantly.

4. Among ESL students, MAT112 cohort still outperformed MAT113 cohort. However, when looking at MAT112 and MAT113 respectively, ESL students underperformed non-ESL students. 

5. The degrees of influence of various factors on the exam were ordered by PLL score, Instructor effect, and ESL.

6. Other factors were also examined but not included in the regression models 



<BR><BR>

**Project Team** (alphabetical order by last name):

*Project Planning and Design*: Michael Fisher, Allison Kolpas, Cheng Peng, Susan Turner.

*Data Collection and Support*: Michael Clemons, Michael Fisher, Carmen Laurelli, Sally Malarney, Andre Perkoski, Susan Turner. 

*Data Analysis and Reporting*: Cheng Peng.
</td></tr></table>
<br><br>
</td></tr></table>

<br><br><br>

# Introduction

The learning outcomes and the core coverage of both MAT112 and MAT113 are the same. MAT112 has one extra credit hour to cover basic algebra while MAT113 only does a brief review of the basic algebra. The goal of this analysis is to assess the <font color = "red">*\color{red} "net performance gain" (NG, to be elaborated later)*</font> solely due to the addition of one extra credit hour to MAT112. The performance is measured with the transformed grade in a common exam given to participants in the entire study sample. 

To extract the <font color = "red">*\color{red}The \textbf{net performance gain}*</font> solely due to the addition of one credit hour to MAT112, all effects that have influences on the exam grade should be removed (or adjusted). The method of linear regression modeling can help achieve the goal. In fact, <font color = "red">*\color{red}The \textbf{net performance gain} is the regression coefficient of courseID.*</font>. 

In general, omitting influential factors leads to biased estimates of the regression coefficients including *net performance gain*. To find the accurate *net performance gain*, we proceeded with the subsequent analysis by identifying possible influential factors to include in the model to correct the bias in the *net performance gain*. We call this process <font color = "red">*\color{red}\textbf{model adjustment}*.</font> 


# Data Collection and Preparation

The project team decided to invite four colleagues who taught **both MAT112 and MAT113** in the fall semester of 2023 to help with data collection. All sections of MAT112 and MAT113 taught by these four instructors were included in this study. In the study sample, 278 students were enrolled in the study. Among them, 105 were enrolled in MAT112 and 173 in MAT113.

## Design of Data Collection

The measurements used to assess the performance in these two courses are the grades of the common final exam. To control unnecessary bias, the following protocols were employed in the design of the experiment:

1. A common exam with show-your-work questions and multiple-choice questions (MCQ is only worth 3.4% of total points) was given to all MAT112 and MAT113 students. The completed exams were scanned and uploaded to *Crowdmark* - an online grading software system for instructors.

2. Each instructor graded a set of questions for all 278 participating students. Itemized marks were also recorded in the grade book. This defined the first primary data set for the analysis.

3. The second primary data set consisted of students' math placement scores and a few demographic variables such as ESL and prior math classes.

4. The third data set was created based on class rosters that contain students' majors and current grade levels (freshman, sophomore, junior, and senior).


## Data Processing and Cleaning

Some standard data cleaning and processing procedures were performed to create the final analytic data sets. The major data steps taken in the process were data merging and data conversion.

Since 24 students in the sample did *not* have a math placement score, merging all three data sources to make a single analytic data set will lead to a reduced sample. We decided to create two analytic data sets: (1) merging all three data sources to create an analytic data set with 254 records; and (2) combining class rosters and exam data (278 records) for analysis without using placement scores.


```{r}
exam=read.csv("C:\\Users\\75CPENG\\OneDrive - West Chester University of PA\\Desktop\\cpeng\\WCU-Teaching\\2024Spring\\AWA\\ExamGradesCombined.csv")
mpe22=read.csv("C:\\Users\\75CPENG\\OneDrive - West Chester University of PA\\Desktop\\cpeng\\WCU-Teaching\\2024Spring\\AWA\\MPEFall22.csv")
mpe23=read.csv("C:\\Users\\75CPENG\\OneDrive - West Chester University of PA\\Desktop\\cpeng\\WCU-Teaching\\2024Spring\\AWA\\MPEFall23.csv")
roster=read.csv("C:\\Users\\75CPENG\\OneDrive - West Chester University of PA\\Desktop\\cpeng\\WCU-Teaching\\2024Spring\\AWA\\roster.csv")
## processing
mpe0 = rbind(mpe22, mpe23)
##
email=mpe0$Email
atloc0=unlist(gregexpr('@', email))
## deleting records with missing emails from MPE
mpe = mpe0[which(atloc0==9 | atloc0==10),]
atloc = atloc0[which(atloc0==9 | atloc0==10)]
##
substr0=substr(mpe$Email, 1, atloc-1)
ctr=nchar(substr0)
ID = substr(substr0, 3, ctr)
mpe$ID = ID
### Combining all data sets - inner join
roster.exam = merge(roster, exam, by = "ID")
mpe.exam = merge(mpe, exam, by = "ID")
alldata = merge(mpe.exam, roster, by="ID")
```


## Data Conversion

Data conversion in this analysis was based on two considerations: Privacy protection and technical requirements. 

### De-identification

The sole objective of this study is to assess the <font color = "red">*\color{red}\textit{net performance gain}* </font> of the one extra credit hour added to MAT112. However, a student’s performance in the common exam could be affected by different factors including the instructor’s teaching and student preparedness. Students’ PPL scores were recorded after they completed the placement test. A proxy instructor ID was used to de-identify the information of participating instructors.

We used two different proxy variables for instructors on different occasions to increase the level of privacy protection. Furthermore, The exam scores were converted to a new scale so that the newly converted variable carried the same information as the original grades.

### Handling Sparse Categorical Variables

Students' intended majors at the time of placement test and prior math classes are the two sparse categorical variables. These two variables cannot be used for analysis in their original forms due to sparse categories. We redefined these two variables based on their original distributions. The detailed definitions can be found in the RMarkdown source code.



```{r}
#names(alldata)
var.name=c("ID", "PlaceCtr", "PlaceTime", "PlacePer", "Level.x", "Class", "ESL", "StudentStatus", "Section", "Q3", "Q45",  "Q67", "Q89", "Q10a2c", "Q10d2f"   , "Q10g2i", "Q11", "Q1213" , "Q14",  "Q1516" ,"Q17", "MC1",  "MC2", "Units", "Major" , "Level.y", "InstrID")
##
analytic0 = alldata[ ,var.name]
analytic0$mpeScore = as.numeric(gsub('%','',analytic0$PlacePer))
### pre-math courses
trig=c("Algebra 2 with Trigonometry", "Algebra and Trigonometry", "Functions, Statistics, and Trigonometry","Trigonometry")
alg = c("Algebra 1 (including all Algebra 1 versions, such as Algebra 1A, 1B, etc.)", "Algebra 2", "Basic Math / Fundamentals of Arithmetic", "Business Math", "College Algebra", "Intermediate Algebra")
precal=c("PreCalculus")
calc=c("Advanced Math", "AP Calculus AB", "Calculus", "Calculus I" )
stats=c("AP Statistics", "Statistics")
geo=c("Geometry", "Integrated Math I or Integrated Algebra / Geometry", "IB Further Mathematics SL", "IB Mathematics SL")
premath = analytic0$Class
###
premath[which(analytic0$Class %in% trig)]   = "trignom"
premath[which(analytic0$Class %in% alg)]    = "algebra"
premath[which(analytic0$Class %in% precal)] = "precalc"
premath[which(analytic0$Class %in% calc)]  =  "calculs"
premath[which(analytic0$Class %in% stats)] =  "statist"
premath[which(analytic0$Class %in% geo)]  =   "geometr"
analytic0$premath = premath
#### math level: high school or college
mathlevel = analytic0$Level.x
mathlevel[which(mathlevel=="High School")] = "HighSchool"
analytic0$premathlevel = mathlevel
### Grade level
analytic0$gradelevel = analytic0$Level.y
### major classification
prebus = c("Undergraduate - BA Languages & Cultures, Span/Pre-Business: Management BS", "Undergraduate - Pre-Business: Accounting BS", "Undergraduate - Pre-Business: Eco-Finance BS", "Undergraduate - Pre-Business: Management BS", "Undergraduate - Pre-Business: Management BS/Japanese Minor", "Undergraduate - Pre-Business: Mgmt BS - HR", "Undergraduate - Pre-Business:Marketing BS", "Undergraduate - Pre-Business:Marketing BS/Digital Marketing Minor", "Undergraduate - Pre-Business:Marketing BS/Minor in Media and Culture", "Undergraduate - Pre-International Business")
psych=c("Undergraduate - BS Psychology", "Undergraduate - BS Psychology/American Sign Language Minor", "Undergraduate - BS Psychology/Biology MINOR", "Undergraduate - BS Psychology/Studio Art MINOR")
majortype=analytic0$Major
majortype[which(analytic0$Major %in% prebus)] = "prebus"
majortype[which(analytic0$Major %in% psych)] = "psych"
majortype[-(which(majortype %in% c("psych", "prebus")))] = "other"
analytic0$majortype = majortype
### Course number
analytic0$CourseNum = substr(analytic0$Section, 11, 16)
analytic0$SecteNum = substr(analytic0$Section, 18, 19)
## Final variable list
final.var = c("ID","PlaceCtr", "ESL", "Q3", "Q45", "Q67",  "Q89", "Q10a2c", "Q10d2f" , "Q10g2i", "Q11", "Q1213", "Q14", "Q1516",  "Q17", "MC1" , "MC2" ,"Units" ,  "InstrID",  "mpeScore", "premath", "premathlevel",  "gradelevel", "majortype", "CourseNum","SecteNum")
analytic = analytic0[, final.var]
analytic$examtotal = 100*(analytic$Q3 + analytic$Q45+analytic$Q67+analytic$Q89+ analytic$Q10a2c + analytic$Q10d2f + analytic$Q10g2i + analytic$Q11 +  analytic$Q1213 + analytic$Q14 + analytic$Q1516 + analytic$Q17 + analytic$MC1 + analytic$MC2)/176 
analytic$MCtotal = analytic$MC1 + analytic$MC2
```


## Summary Analytic Datasets 

The following is a list of variables and their descriptions.

1. `ID`: observation ID.

2. `PlaceCtr`: attempts of the placement test (PPL).

3. `ESL`: status of ESL: 1 = ESL student, 0 = nonESL student.

4. `Qxxx`: specific questions.

5. `MCx`: multiple choice questions.

6. `Units`: 4 for MAT112 and 3 for MAT113.

7. `InstrID`: instructor's proxy ID.

8. `mpeScore`: PPL score. <font color = "red">*\color{red}It will be simply called \textbf{PPL}.*</font>

9. `premath`: highest level math course taken before MAT112/MAT113 (including those taken in high school and college).

10. `majortype`: aggregated into three major categories: pre-business, psychology, and other majors. <font color = "red">*\color{red}It will be simply called \textbf{Major}.*</font>

11. `CourseID`: either MAT112 or MAT113 (MAT112 is the baseline). <font color = "red">*\color{red} \textbf{net gain} = average exam of MAT113 - average exam of MAT112 \textbf{after other factors were adjusted}.*</font>

12. `SecteNum`: course section number.

13. `examTotal`: percentiles of the total exam scores.  <font color = "red">*\color{red}It will be simply called \textbf{Exam}*.</font>

14. `MCtotal`: total marks earned in MCQ.


These variable names were used to denote their corresponding effects on the response exam score in the rest of this report. 

# Influence of PPL and Exam

Some comparisons between MAT112 and MAT113 using both descriptive visualizations and analytic approaches were summarized in the following subsections. 

## Unadjusted Descriptive Statistics

The following table reports the means of PPL and the exam scores as well as 95% confidence intervals.

```{r}
PPL.112=(analytic$mpeScore)[which(analytic$CourseNum=='MAT112')]
PPL.113=(analytic$mpeScore)[which(analytic$CourseNum=='MAT113')]
Exam.112=(100*(roster.exam$Total)/176)[which(roster.exam$Course==112)]
Exam.113=(100*(roster.exam$Total)/176)[which(roster.exam$Course==113)]
PPL112 = summary(PPL.112)
PPL113 = summary(PPL.113)
Exam112 = summary(Exam.112)
Exam113 = summary(Exam.113)
summary.table0=as.data.frame(round(rbind(PPL112=PPL112, PPL113 = PPL113, Exam112 = Exam112, Exam113 = Exam113),1))
N=c(length(PPL.112),length(PPL.113),length(Exam.112),length(Exam.113))
##
LCI.mu.95 =round( c(mean(PPL.112)-qnorm(0.975)*sd(PPL.112)/sqrt(length(PPL.112)), mean(PPL.113)-qnorm(0.975)*sd(PPL.113)/length(length(PPL.113)),
              mean(Exam.112)-qnorm(0.975)*sd(Exam.112)/sqrt(length(Exam.112)),mean(Exam.113)-qnorm(0.975)*sd(Exam.113)/sqrt(length(Exam.113))),2)
##
UCI.mu.95 =round( c(mean(PPL.112)+qnorm(0.975)*sd(PPL.112)/sqrt(length(PPL.112)), mean(PPL.113)+qnorm(0.975)*sd(PPL.113)/sqrt(length(PPL.113)),
              mean(Exam.112)+qnorm(0.975)*sd(Exam.112)/sqrt(length(Exam.112)),mean(Exam.113)+qnorm(0.975)*sd(Exam.113)/sqrt(length(Exam.113))),2)
#
summary.table0$N= N
summary.table0$LCI.mu.95 = LCI.mu.95
summary.table0$UCI.mu.95 = UCI.mu.95
kable(summary.table0, caption="Five-number-summaries and confidence intervals of mean PPL and exam scores of MAT112 and MAT113 respectively.")
```

> The 95% confidence intervals of the mean PPL scores of MAT 112 and MAT113 were given, respectively, by $[35.87, 38.46]$ and $[15.24, 50.60]$. The overlapped confidence intervals implied that the two means were not significantly different.

> The 95% confidence intervals of the mean exam scores of MAT 112 and MAT113 were given, respectively, by $[58.96, 67.62]$ and $[52.54, 58.69]$. This implied that the mean exam scores of MAT112 and MAT113 cohorts were significantly different. The mean exam score of MAT112 was higher than that of MAT113.

To see more detailed *distributional* information about the distributions of PPL and exam scores in MAT112 and MAT113, we plotted the density curves of these distributions in the same graphic panel for visual comparison.


```{r fig.align='center', fig.width=4, fig.height=3, fig.pos="h",  fig.cap=" Distributions of PPL score and exam score between the two courses"}
## MPE scores
ppl.112=analytic$mpeScore[which(analytic$CourseNum=="MAT112")]
ppl.113=analytic$mpeScore[which(analytic$CourseNum=="MAT113")]
## Final Percentages
exam.112=analytic$examtotal [which(analytic$CourseNum=="MAT112")]
exam.113=analytic$examtotal [which(analytic$CourseNum=="MAT113")]

plot(density(ppl.112), col="red", lwd=1, lty=2, xlim=c(0,100), main="Density distributions", xlab="PPL/Final Exam")
lines(density(exam.112), col="red", lwd=2, lty=1)
lines(density(ppl.113), col = "blue", lwd=1, lty=2)
lines(density(exam.113), col="blue", lwd=2, lty=1)
legend("topright", c("PPL.112","exam.112","PPL.113", "exam.113"), col=c("red","red","blue","blue"),
       lwd=c(1,2,1,2), lty=c(2,1,2,1), cex = 0.8, bty="n")
```

The above figure indicates the difference between the distribution of the PPL and Exam in MAT112 and MAT113. <font color="red">*\color{red} The farther the curve shifts to the right, the better the performance.*</font> To be more specific

* The distributions of PLL scores (the dotted curves) of MAT112 and MAT113 students were different. MAT112 students had overall poorer PPL scores than their counterparts in MAT113.

* The performance of MAT112 students in the exam (solid curves) was significantly better than that of MAT113 students.



The 95% confidence interval of the difference between the mean PPL and exam scores of MAT112 and MAT113 students are given respectively in the following.

```{r comment = NA}

LCL.PPL =(mean(ppl.113)-mean(ppl.112))-1.96*sqrt(var(ppl.113)/length(ppl.113)+var(ppl.112)/length(ppl.112))
UCL.PPL =(mean(ppl.113)-mean(ppl.112))+1.96*sqrt(var(ppl.113)/length(ppl.113)+var(ppl.112)/length(ppl.112))
##
LCL.exam =(mean(exam.113)-mean(exam.112))-1.96*sqrt(var(exam.113)/length(exam.113)+var(exam.112)/length(exam.112))
UCL.exam =(mean(exam.113)-mean(exam.112))+1.96*sqrt(var(exam.113)/length(exam.113)+var(exam.112)/length(exam.112))
##
CI.diff = as.data.frame(rbind(PPL=c(LCL.PPL, UCL.PPL), Exam=c(LCL.exam, UCL.exam)))
CI.diff$real.dif = c((mean(ppl.113) - mean(ppl.112)),(mean(exam.113) - mean(exam.112)))
colnames(CI.diff) = c("LCI.95%", "UCI.95%", "MAT113-MAT112")
kable(CI.diff, caption = "95% confidence intervals of mean PPL and exam scores between MAT112 and MAT113 students.")
```



## Correlation between Exam and PPL Scores


```{r fig.align='center', fig.width=8, fig.height=3, fig.pos="ht", fig.cap="Correlation between PPL score and exam score."}
n = dim(analytic)[1]
id.112 = which(analytic$CourseNum=="MAT112")
cols <- rep(rgb(84/255, 3/255, 171/255, 0.5),n)    # initialize cols to black
cols[analytic$CourseNum=="MAT112"] <- rgb(11/255, 84/255, 71/255, 0.5) # change females to red
###
set.seed(183491)
par(mfrow=c(1,3))
plot(analytic$mpeScore, analytic$examtotal, pch=19, main="MAT112 and MAT113", 
     xlim=c(0,100),ylim=c(0,100),
     col=cols, ylab="Converted Exam Score", xlab="PPL Score", las=1, cex = 1.2)
legend("bottomright",c("MAT113","MAT112"),
       col=c(rgb(84/255, 3/255, 171/255, 0.5),rgb(11/255, 84/255, 71/255, 0.5)),
       pch=19, cex=0.7, bty = "n")
text(90,95, "r = 0.082", col="red", cex = 0.9)
##
plot(analytic$mpeScore[id.112], analytic$examtotal[id.112], pch=19, main="MAT112",
     xlim=c(0,100),ylim=c(0,100),
     col=cols[id.112], ylab="Converted Exam Score", xlab="PPL Score", las=1, cex = 1.2)
text(90,95, "r = 0.027", col="red", cex = 0.9)
##
plot(analytic$mpeScore[-id.112], analytic$examtotal[-id.112], pch=19, main="MAT113",
     xlim=c(0,100),ylim=c(0,100),
     col=cols[-id.112], ylab="Converted Exam Score", xlab="PPL Score", las=1, cex = 1.2)
text(90,95, "r = 0.198", col="red", cex = 0.9)
```

The above figure shows a weak correlation between PPL and exam scores. The strength of the correlation of the two types of scores in the MAT112 cohort was much weaker than that of MAT113. Furthermore, the two scores were almost uncorrelated in MAT112. This observation implies that one extra credit hour played a key role in improving the performance of the common exam.


## Regression Approach to Adjustments

We performed a simultaneous comparison of the performance for MAT112 and MAT113 by adjusting the baseline PPL score using the following regression model.

$$\text{Exam} = \beta_0 + \beta_1 \times \text{PPL} + \beta_2\times \text{CourseID} + \epsilon.$$

In the above linear model, $\beta_2$ measures the "true" difference between the mean exam scores of MAT113 and MAT112, i.e., the <font color="red">*\color{red}\textbf{net performance gain} = average exam score of MAT113 - average exam score of MAT112*</font>, after the effect of PPL being adjusted. This **net performance gain** will be further adjusted as more influential factors are added to the subsequent models.


```{r fig.align='center', fig.width=7, fig.height=3, fig.cap="Diagnostic plots of linear regression model: No significant violations."}
m0 = lm(examtotal~mpeScore+CourseNum, data=analytic)
par(mfrow=c(1,2))
plot(m0, pch=21, col="navy", cex = 0.8, which=1:2)
```

The above diagnostic plots do not indicate a serious violation of the model assumption. The regression results are summarized in the following table.
 
```{r}
reg.output=summary(m0)$coefficients
kable(reg.output, caption="Inferential results of regression model")
```

The above inferential table shows that

* The PPL scores were positively correlated to the exam scores.  
* The negative coefficient $-9.34$ indicated that the mean exam score of MAT113 was 9.37 **lower than** that of MAT112 for any given PPL scores.


## Instructor Effect

In general, individual instructor's delivery methods influence exam scores to various degrees. We examined the distributions of the common exam grades in MAT112 and MAT113 taught by the same instructor in this subsection for potential differences to see whether to include InstrID in the model to estimate the "net performance gain" more accurately.

```{r fig.align='center', fig.width=7, fig.height=3, fig.pos="h",  fig.cap="Difference by individual instructor: Instructors A and B"}
Instr1.112 = 100*roster.exam$Total[which(roster.exam$Course==112 & roster.exam$InstrID==1)]/176
Instr1.113 = 100*roster.exam$Total[which(roster.exam$Course==113 & roster.exam$InstrID==1)]/176
Instr2.112 = 100*roster.exam$Total[which(roster.exam$Course==112 & roster.exam$InstrID==2)]/176
Instr2.113 = 100*roster.exam$Total[which(roster.exam$Course==113 & roster.exam$InstrID==2)]/176
Instr3.112 = 100*roster.exam$Total[which(roster.exam$Course==112 & roster.exam$InstrID==3)]/176
Instr3.113 = 100*roster.exam$Total[which(roster.exam$Course==113 & roster.exam$InstrID==3)]/176
Instr4.112 = 100*roster.exam$Total[which(roster.exam$Course==112 & roster.exam$InstrID==4)]/176
Instr4.113 = 100*roster.exam$Total[which(roster.exam$Course==113 & roster.exam$InstrID==4)]/176
par(mfrow=c(1,2))
plot(density(Instr1.112), xlim=c(0,100), ylim=c(0, 0.035), xlab="Exam Grade", col="red", lty=1, lwd=1, main="Instructor A")
lines(density(Instr1.113),col="blue", lty=1, lwd=1)
legend("topleft", c("112", "113"), col=c("red","blue"), lty=c(1,1), lwd=c(1,1), bty="n", cex=0.7)
plot(density(Instr2.112), xlim=c(0,100),ylim=c(0, 0.035),  xlab="Exam Grade", col="red", lty=1, lwd=1, main="Instructor B")
lines(density(Instr2.113),col="blue", lty=1, lwd=1)
legend("topleft", c("112", "113"), col=c("red","blue"), lty=c(1,1), lwd=c(1,1), bty="n", cex=0.7)

```

\newpage

```{r fig.align='center', fig.width=7, fig.height=3, fig.pos="h", fig.cap="Difference by individual instructor: Instructors C and D"}
par(mfrow=c(1,2))

plot(density(Instr3.112), xlim=c(0,100), ylim=c(0, 0.035), xlab="Exam Grade", col="red", lty=1, lwd=1, main="Instructor C")
lines(density(Instr3.113),col="blue", lty=1, lwd=1)
legend("topleft", c("112", "113"), col=c("red","blue"), lty=c(1,1), lwd=c(1,1), bty="n", cex=0.7)

plot(density(Instr4.112), xlim=c(0,100), ylim=c(0, 0.035), xlab="Exam Grade", col="red", lty=1, lwd=1, main="Instructor D")
lines(density(Instr4.113),col="blue", lty=1, lwd=1)
legend("topleft", c("112", "113"), col=c("red","blue"), lty=c(1,1), lwd=c(1,1), bty="n", cex=0.7)
```

The above curves show a significant difference between the distributions of MAT112 and MAT113 for each individual instructor. To be more specific,

* The degrees of difference varied among instructors. 
* Overall, MAT112 students outperformed MAT113 students. 

The above implies that the effect of the instructor should be considered when comparing the performance in the exam of students in MAT112 and MAT113.

## Joint Influence of PPL and Instructor

Adding corresponding PPL density curves to the above figures allows comparisons with joint adjustments of PPL and Instructor. The next few plots represent the distributions of exam grades in MAT112 and MAT113 with considerations of the influences of PPL scores and instructors.


```{r fig.align='center', fig.width=7, fig.height=3, fig.pos="h", fig.cap="Difference by individual instructor: Instructors 1 and 2"}
### exam grade
Instr1.112 = analytic$examtotal [which(analytic$CourseNum=="MAT112" & analytic$InstrID==1)]
Instr1.113 = analytic$examtotal [which(analytic$CourseNum=="MAT113" & analytic$InstrID==1)]
Instr2.112 = analytic$examtotal [which(analytic$CourseNum=="MAT112" & analytic$InstrID==2)]
Instr2.113 = analytic$examtotal [which(analytic$CourseNum=="MAT113" & analytic$InstrID==2)]
Instr3.112 = analytic$examtotal [which(analytic$CourseNum=="MAT112" & analytic$InstrID==3)]
Instr3.113 = analytic$examtotal [which(analytic$CourseNum=="MAT113" & analytic$InstrID==3)]
Instr4.112 = analytic$examtotal [which(analytic$CourseNum=="MAT112" & analytic$InstrID==4)]
Instr4.113 = analytic$examtotal [which(analytic$CourseNum=="MAT113" & analytic$InstrID==4)]
### PLL scores
Instr1.112ppl = analytic$mpeScore [which(analytic$CourseNum=="MAT112" & analytic$InstrID==1)]
Instr1.113ppl = analytic$mpeScore [which(analytic$CourseNum=="MAT113" & analytic$InstrID==1)]
Instr2.112ppl = analytic$mpeScore [which(analytic$CourseNum=="MAT112" & analytic$InstrID==2)]
Instr2.113ppl = analytic$mpeScore [which(analytic$CourseNum=="MAT113" & analytic$InstrID==2)]
Instr3.112ppl = analytic$mpeScore [which(analytic$CourseNum=="MAT112" & analytic$InstrID==3)]
Instr3.113ppl = analytic$mpeScore [which(analytic$CourseNum=="MAT113" & analytic$InstrID==3)]
Instr4.112ppl = analytic$mpeScore [which(analytic$CourseNum=="MAT112" & analytic$InstrID==4)]
Instr4.113ppl = analytic$mpeScore [which(analytic$CourseNum=="MAT113" & analytic$InstrID==4)]
###
par(mfrow=c(1,2))
plot(density(Instr1.112), xlim=c(0,100), ylim=c(0, 0.085), xlab="PPL/Final Exam", col="red", lty=1, lwd=2, main="Instructor 1")
lines(density(Instr1.113),col="blue", lty=1, lwd=2)
lines(density(Instr1.112ppl),col="red", lty=2, lwd=1)
lines(density(Instr1.113ppl),col="blue", lty=2, lwd=1)
legend("topright", c("112Exam", "113Exam", "112PPL", "113PPL"), col=c("red","blue","red","blue"), lty=c(1,1,2,2), lwd=c(2,2,1,1), bty="n", cex=0.7)
##
plot(density(Instr2.112), xlim=c(0,100),ylim=c(0, 0.085),  xlab="PPL/Final Exam", col="red", lty=1, lwd=2, main="Instructor 2")
lines(density(Instr2.113),col="blue", lty=1, lwd=2)
lines(density(Instr2.112ppl),col="red", lty=2, lwd=1)
lines(density(Instr2.113ppl),col="blue", lty=2, lwd=1)
legend("topright", c("112Exam", "113Exam", "112PPL", "113PPL"), col=c("red","blue","red","blue"), lty=c(1,1,2,2), lwd=c(2,2,1,1), bty="n", cex=0.7)
```

```{r fig.align='center', fig.width=7, fig.height=3, fig.pos="h", fig.cap="Difference by individual instructor: Instructors 1 and 2"}
##
par(mfrow=c(1,2))
plot(density(Instr3.112), xlim=c(0,100), ylim=c(0, 0.085), xlab="PPL/Final Exam", col="red", lty=1, lwd=2, main="Instructor 3")
lines(density(Instr3.113),col="blue", lty=1, lwd=2)
lines(density(Instr3.112ppl),col="red", lty=2, lwd=1)
lines(density(Instr3.113ppl),col="blue", lty=2, lwd=1)
legend("topright", c("112Exam", "113Exam", "112PPL", "113PPL"), col=c("red","blue","red","blue"), lty=c(1,1,2,2), lwd=c(2,2,1,1), bty="n", cex=0.7)
##
plot(density(Instr4.112), xlim=c(0,100), ylim=c(0, 0.085), xlab="PPL/Final Exam", col="red", lty=1, lwd=2, main="Instructor 4")
lines(density(Instr4.113),col="blue", lty=1, lwd=2)
lines(density(Instr4.112ppl),col="red", lty=2, lwd=1)
lines(density(Instr4.113ppl),col="blue", lty=2, lwd=1)
legend("topright", c("112Exam", "113Exam", "112PPL", "113PPL"), col=c("red","blue","red","blue"), lty=c(1,1,2,2), lwd=c(2,2,1,1), bty="n", cex=0.7)
```

The above plots provide an adjusted pair-wise comparison between PPL grade and the exam grade adjusted by the effect of the instructor. *This project does not intend to perform any comparison among instructors.*

The patterns that are common to all instructors: 

(1) MAT112 students had poor PPL scores but better exam scores. 

(2) MAT113 students had better PPL scores but poorer exam scores. The difference in shapes of the solid density curves (particularly the degrees of shift to the right) indicated instructors' influence. 

Therefore, both PPL and the influence of the instructor should be adjusted simultaneously when comparing the performance of MAT112 and MAT113 students in the common exam.


## Modeling approach with Simultaneous Adjustments

Since the PPL score and instructor effect jointly contribute to the performance of the exam, we use a linear regression model to help compare the performance in MAT112 and MAT113 with simultaneous adjustment of PPL and InstrID using the following regression model. 

$$
\text{Exam} = \beta_0 + \beta_1 \text{PPL-score} + \beta_2\text{InstrID}_2 +\beta_3\text{InstrID}_3 + \beta_4\text{CourseID}_4 + \beta_5\text{CourseID}+\epsilon
$$

The above model will generate three indicator variables:

$$
\text{(InstrID)}_2 = \begin{cases}
        1 & \text{if 2nd inst,} \\
        0 & \text{if not 2nd inst} 
    \end{cases}, \mbox{     }
\text{(InstrID)}_3 = \begin{cases}
        1 & \text{if 3rd inst,} \\
        0 & \text{if not 3rd instr} 
    \end{cases}, \mbox{     }  
\text{(InstrID)}_4 = \begin{cases}
        1 & \text{if 4th inst,} \\
        0 & \text{if not 4th instr} 
    \end{cases}.
$$

The next residual and QQ plots do not show any serious violation of the assumption of linear regression. The results of the regression model are summarized in the following table.


```{r fig.align='center', fig.width=7, fig.height=4, fig.pos = "h", fig.cap="Diagnostic plots of linear regression model: No significant violations."}
m1 = lm(examtotal~mpeScore+ factor(InstrID) + CourseNum, data=analytic)
par(mfrow=c(1,2))
plot(m1, pch=21, col="navy", cex = 0.8, which=1:2)
```


```{r}
reg.output=summary(m1)$coefficients
kable(reg.output, caption="Inferential results of regression model")
```

The above shows that both PPL and Instructor effects are significant as expected. After additional adjustments with the instructor effect, the <font color = "red">*\color{red}\textit{net performance gain}*</font> increased from the previous 9.34 to 11.22.

## Summary

*There is solid evidence to support the hypothesis that MAT112 students outperformed MAT113 students after the potential effects of PPL and instructor being adjusted.* 

As observed earlier, PPL has a weak positive correlation with performance in the exam. within each instructor, one mark increment in the average PPL led to a 0.23 increase in the average exam for every instructor. 

The individual instructors' contribution to the difference of averages between MAT112 and MAT113 differs vastly. The comparison between instructors is not part of the goal of this study.


# Comparisons with Secondary Demographic Factors

Several other demographic variables are also available in the data. We performed some visual inspections to make necessary further adjustments to this section.

## Effect of Different Majors

The sample had 53% of students from pre-business programs and 30% from psychology programs. We classified all participating students into three categories: pre-business, psychology, and other. The following density curves represent the distributions of PPL and exam scores by majors.

```{r fig.align='center', fig.width=8, fig.height=3, fig.pos="h", fig.cap="Potential Difference adjusted by majors and PPL scores "}
###
otherPPL112 = analytic$mpeScore[which(analytic$majortype=="other" & analytic$CourseNum=="MAT112")]
otherExam112 = analytic$examtotal[which(analytic$majortype=="other" & analytic$CourseNum=="MAT112")]
otherPPL113 = analytic$mpeScore[which(analytic$majortype=="other" & analytic$CourseNum=="MAT113")]
otherExam113 = analytic$examtotal[which(analytic$majortype=="other" & analytic$CourseNum=="MAT113")]
###
prebusPPL112= analytic$mpeScore[which(analytic$majortype=="prebus" & analytic$CourseNum=="MAT112")]
prebusExam112= analytic$examtotal[which(analytic$majortype=="prebus" & analytic$CourseNum=="MAT112")]
prebusPPL113= analytic$mpeScore[which(analytic$majortype=="prebus" & analytic$CourseNum=="MAT113")]
prebusExam113= analytic$examtotal[which(analytic$majortype=="prebus" & analytic$CourseNum=="MAT113")]
###
psychPPL112 = analytic$mpeScore[which(analytic$majortype=="psych" & analytic$CourseNum=="MAT112")]
psychExam112 = analytic$examtotal[which(analytic$majortype=="psych" & analytic$CourseNum=="MAT112")]
psychPPL113 = analytic$mpeScore[which(analytic$majortype=="psych" & analytic$CourseNum=="MAT113")]
psychExam113 = analytic$examtotal[which(analytic$majortype=="psych" & analytic$CourseNum=="MAT113")]
##
par(mfrow=c(1,3))
##
plot(density(prebusPPL112), xlim=c(0,100), ylim=c(0,0.09), col="red", lty=2, lwd = 1, main="Pre-business Majors", xlab="PPL/Exam Grade")
lines(density(prebusExam112), col="red", lty=1, lwd=2)
lines(density(prebusPPL113), col="blue", lty=2, lwd=1)
lines(density(prebusExam113), col="blue", lty=1, lwd=2)
legend("topright", c("PPL112", "Exam112","PPL113", "Exam113"),
       col=c("red", "red", "blue", "blue"), lty=c(2,1,2,1), lwd=c(1,2,1,2),
       bty="n", cex = 0.7)
##
plot(density(psychPPL112), xlim=c(0,100), ylim=c(0,0.09), col="red", lty=2, lwd = 1, main="Psychology Majors", xlab="PPL/Exam Grade")
lines(density(psychExam112), col="red", lty=1, lwd=2)
lines(density(psychPPL113), col="blue", lty=2, lwd=1)
lines(density(psychExam113), col="blue", lty=1, lwd=2)
legend("topright", c("PPL112", "Exam112","PPL113", "Exam113"),
       col=c("red", "red", "blue", "blue"), lty=c(2,1,2,1), lwd=c(1,2,1,2),
       bty="n", cex = 0.7)
##
plot(density(otherPPL112), xlim=c(0,100), ylim=c(0,0.09), col="red", lty=2, lwd = 1, main="Other Majors", xlab="PPL/Exam Grade")
lines(density(otherExam112), col="red", lty=1, lwd=2)
lines(density(otherPPL113), col="blue", lty=2, lwd=1)
lines(density(otherExam113), col="blue", lty=1, lwd=2)
legend("topright", c("PPL112", "Exam112","PPL113", "Exam113"),
       col=c("red", "red", "blue", "blue"), lty=c(2,1,2,1), lwd=c(1,2,1,2),
       bty="n", cex = 0.7)
```


The shapes of the density curves of the exam grades of the two major cohorts were similar to each other. In other words,  the mean exam scores among the three categories of majors were not significantly different. Therefore, students from the three major categories will not contribute to the *net performance gain*.


```{r fig.align='center', fig.width=7, fig.height=3.5, fig.pos = "h", fig.cap="Diagnostic plots of linear regression model: No significant violations."}
m2 = lm(examtotal~mpeScore+ factor(InstrID) + majortype + CourseNum, data=analytic)
par(mfrow=c(1,2))
plot(m2, pch=21, col="navy", cex = 0.8, which=1:2)
```

The above residual diagnostic plots do not indicate serious violations of assumptions. 


```{r}
reg.output=summary(m2)$coefficients
kable(reg.output, caption="Inferential results of regression model: adjusted with PPL, Instr., and Major")
```

The above regression results also confirmed major-type to be insignificant ($p > 0.1$).


## Potential ESL Effects

There are 24 ESL students in this study (about 10% of the total participants). The next two figures show the same type of distributional information.


```{r fig.align='center', fig.width=7, fig.height=4, fig.cap="Potential Difference adjusted by ESL and PPL scores "}
###
ESLPPL112 = analytic$mpeScore[which(analytic$ESL=="Yes" & analytic$CourseNum=="MAT112")]
ESLExam112 = analytic$examtotal[which(analytic$ESL=="Yes" & analytic$CourseNum=="MAT112")]
ESLPPL113 = analytic$mpeScore[which(analytic$ESL=="Yes" & analytic$CourseNum=="MAT113")]
ESLExam113 = analytic$examtotal[which(analytic$ESL=="Yes" & analytic$CourseNum=="MAT113")]
###
NonESLPPL112= analytic$mpeScore[which(analytic$ESL=="No" & analytic$CourseNum=="MAT112")]
NonESLExam112= analytic$examtotal[which(analytic$ESL=="No" & analytic$CourseNum=="MAT112")]
NonESLPPL113= analytic$mpeScore[which(analytic$ESL=="No" & analytic$CourseNum=="MAT113")]
NonESLExam113= analytic$examtotal[which(analytic$ESL=="No" & analytic$CourseNum=="MAT113")]

##
par(mfrow=c(1,2))
##
plot(density(ESLPPL112), xlim=c(0,100),  col="red", lty=2, lwd = 1, 
     main="ESL Students", xlab="PPL/Exam Grade")
lines(density(ESLExam112), col="red", lty=1, lwd=2)
lines(density(ESLPPL113), col="blue", lty=2, lwd=1)
lines(density(ESLExam113), col="blue", lty=1, lwd=2)
legend("topright", c("PPL112", "Exam112","PPL113", "Exam113"),
       col=c("red", "red", "blue", "blue"), lty=c(2,1,2,1), lwd=c(1,2,1,2),
       bty="n", cex = 0.7)
##
plot(density(NonESLPPL112), xlim=c(0,100),  col="red", lty=2, lwd = 1, 
     main="Non-ESL Students", xlab="PPL/Exam Grade")
lines(density(NonESLExam112), col="red", lty=1, lwd=2)
lines(density(NonESLPPL113), col="blue", lty=2, lwd=1)
lines(density(NonESLExam113), col="blue", lty=1, lwd=2)
legend("topright", c("PPL112", "Exam112","PPL113", "Exam113"),
       col=c("red", "red", "blue", "blue"), lty=c(2,1,2,1), lwd=c(1,2,1,2),
       bty="n", cex = 0.7)

```

For ESL students, 60% of MAT112 students earned 60 or above while 21% of MAT113 students earned 60  or above. The mean PPL scores of both MAT112 and MAT113 are close to each other but the MAT112 cohort had a significantly small variance compared to the MAT113 cohort. <font color="red">*\color{red}\textit{The distributions of PPL and exam grades for both MAT112 and MAT113 were essentially the same as the overall distributions as depicted in Figure 1.}*</font>



```{r}
ESL112 = summary(analytic$examtotal[which(analytic$ESL=="Yes" & analytic$CourseNum=="MAT112")])
ESL113 = summary(analytic$examtotal[which(analytic$ESL=="Yes" & analytic$CourseNum=="MAT113")])
nonESL112 = summary(analytic$examtotal[which(analytic$ESL=="No" & analytic$CourseNum=="MAT112")])
nonESL113 = summary(analytic$examtotal[which(analytic$ESL=="No" & analytic$CourseNum=="MAT113")])
ESL = as.data.frame(rbind(ESL112 = ESL112, ESL113 = ESL113,nonESL112 = nonESL112, nonESL113 = nonESL113))
kable(ESL, caption = "Five-number-summary of exam grades of students in MAT112 and MAT113 respectively.")
```

ESL students in MAT112 outperformed their counterparts in MAT113. The same pattern was observed in nonESL students. However, Among MAT112 students, nonESL students outperformed ESL students, the same pattern was also observed in MAT113. These observations could affect the actual <font color="red">*\color{red}\textit{net performance gain}*</font>. Therefore, ESL should be added to the previous regression model.


```{r fig.align='center', fig.width=7, fig.height=3.5, fig.pos = "h", fig.cap="Diagnostic plots of linear regression model: No significant violations."}
m3 = lm(examtotal~mpeScore+ factor(InstrID) + ESL + CourseNum, data=analytic)
par(mfrow=c(1,2))
plot(m3, pch=21, col="navy", cex = 0.8, which=1:2)
```

No significant violations of model assumptions were found from the above residual diagnostic plots. We summarize the regression results in the following table

```{r}
reg.output=summary(m3)$coefficients
kable(reg.output, caption="Inferential results of regression model: adjusted with PPL, Instr., ESL")
```


The above table shows the statistical significance of ESL. After being adjusted with ESL, the <font color="red">*\color{red}\textit{net performance gain}*</font> increased slightly from 11.22 to 11.48. The small change in <font color="red">*\color{red}\textit{net performance gain}*</font> is due to the small number of ESL students in the study.


## Grade Level

The following 2-way table shows the distribution of enrollments MAT112 and MAT113 by grade levels.

```{r}
kable(table(analytic$gradelevel,analytic$CourseNum))
```

Since almost all MAT112 students were freshmen, grade level will *not* be included in the model as an adjusting variable. The following figures provide various visual comparisons of distributions between MAT112 and MAT113 students.

```{r fig.align='center', fig.width=7, fig.height=4, fig.cap="Potential Difference adjusted by grade level (freshman and sophomore) and PPL scores "}
###
FreshmanPPL112 = analytic$mpeScore[which(analytic$gradelevel=="Freshman" & analytic$CourseNum=="MAT112")]
FreshmanExam112 = analytic$examtotal[which(analytic$gradelevel=="Freshman" & analytic$CourseNum=="MAT112")]
FreshmanPPL113 = analytic$mpeScore[which(analytic$gradelevel=="Freshman" & analytic$CourseNum=="MAT113")]
FreshmanExam113 = analytic$examtotal[which(analytic$gradelevel=="Freshman" & analytic$CourseNum=="MAT113")]
###
SophomorePPL112= analytic$mpeScore[which(analytic$gradelevel=="Sophomore" & analytic$CourseNum=="MAT112")]
SophomoreExam112= analytic$examtotal[which(analytic$gradelevel=="Sophomore" & analytic$CourseNum=="MAT112")]
SophomorePPL113= analytic$mpeScore[which(analytic$gradelevel=="Sophomore" & analytic$CourseNum=="MAT113")]
SophomoreExam113= analytic$examtotal[which(analytic$gradelevel=="Sophomore" & analytic$CourseNum=="MAT113")]

##
par(mfrow=c(1,2))
##
plot(density(FreshmanPPL112), xlim=c(0,100), ylim=c(0,0.08), col="red", lty=2, lwd = 1, 
     main="Freshman", xlab="PPL/Exam Grade")
lines(density(FreshmanExam112), col="red", lty=1, lwd=2)
lines(density(FreshmanPPL113), col="blue", lty=2, lwd=1)
lines(density(FreshmanExam113), col="blue", lty=1, lwd=2)
legend("topright", c("PPL112", "Exam112","PPL113", "Exam113"),
       col=c("red", "red", "blue", "blue"), lty=c(2,1,2,1), lwd=c(1,2,1,2),
       bty="n", cex = 0.7)
##
plot(density(SophomorePPL113), xlim=c(0,100), ylim=c(0,0.04),  col="blue", lty=2, lwd = 1, 
     main="Freshman vs Sophomore", xlab="PPL/Exam Grade")
lines(density(SophomoreExam113), col="blue", lty=1, lwd=2)
lines(density(FreshmanPPL113), col="tomato", lty=2, lwd=1)
lines(density(FreshmanExam113), col="tomato", lty=1, lwd=2)

legend("topright", c("SophomorePPL113", "SophomoreExam113","FreshmanPPL113", "FreshmanExam113"),
       col=c("blue", "blue","tomato","tomato"), lty=c(2,1,2,1), lwd=c(1,2,1,2),
       bty="n", cex = 0.7)

```

We can see from the above figure that MAT112 students outperformed MAT113 students.


# Question-specific Comparison - A Visual Inspection

The question-specific sub-scores were also converted to the corresponding percentiles in all comparisons. Since this analysis is not critical to address the sole goal of the project, we will *not* expand the analysis to the same granular level as we did in the previous few sections unless team MAT112/113 wants to explore potential pedagogical strategies to teach specific topics. 

## Baseline Distributions Of Individual Questions

To provide a starting point for potential exploration, we provide only some graphic representations of the distributions of the converted exam grades for individual questions for every instructor.  To avoid cross-comparison among instructors, we defined the baseline distributions of each question based on all 278 participating students.  Individual instructors’ question-specific distributions were based on all MAT112 and MAT113 students they taught. Therefore, individual instructors can compare their own distribution with the common baseline distributions.  


```{r fig.align='center', fig.width=8, fig.height=3, fig.cap="Topic-specific difference between MAT112 and MAT113: Overall"}
### Instr: #1
Q3M112 = (100*(roster.exam$Q3)/max(roster.exam$Q3))[which(roster.exam$Course==112)]
Q3M113 = (100*(roster.exam$Q3)/max(roster.exam$Q3))[which(roster.exam$Course==113)]
Q45M112 = (100*(roster.exam$Q45)/max(roster.exam$Q45))[which(roster.exam$Course==112)]
Q45M113 = (100*(roster.exam$Q45)/max(roster.exam$Q45))[which(roster.exam$Course==113)]
Q67M112 = (100*(roster.exam$Q67)/max(roster.exam$Q67))[which(roster.exam$Course==112)]
Q67M113 = (100*(roster.exam$Q67)/max(roster.exam$Q67))[which(roster.exam$Course==113)]
Q89M112 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==112)]
Q89M113 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==113)]
###
Q10a2cM112 = (100*(roster.exam$Q10a2c)/max(roster.exam$Q10a2c))[which(roster.exam$Course==112)]
Q10a2cM113 = (100*(roster.exam$Q10a2c)/max(roster.exam$Q10a2c))[which(roster.exam$Course==113)]
Q10d2fM112 = (100*(roster.exam$Q10d2f)/max(roster.exam$Q10d2f))[which(roster.exam$Course==112)]
Q10d2fM113 = (100*(roster.exam$Q10d2f)/max(roster.exam$Q10d2f))[which(roster.exam$Course==113)]
Q10g2iM112 = (100*(roster.exam$Q10g2i)/max(roster.exam$Q10g2i))[which(roster.exam$Course==112)]
Q10g2iM113 = (100*(roster.exam$Q10g2i)/max(roster.exam$Q10g2i))[which(roster.exam$Course==113)]
Q11M112 = (100*(roster.exam$Q11)/max(roster.exam$Q11))[which(roster.exam$Course==112)]
Q11M113 = (100*(roster.exam$Q11)/max(roster.exam$Q11))[which(roster.exam$Course==113)]
###
###
Q1213M112 = (100*(roster.exam$Q1213)/max(roster.exam$Q1213))[which(roster.exam$Course==112)]
Q1213M113 = (100*(roster.exam$Q1213)/max(roster.exam$Q1213))[which(roster.exam$Course==113)]
Q14M112 = (100*(roster.exam$Q14)/max(roster.exam$Q14))[which(roster.exam$Course==112)]
Q14M113 = (100*(roster.exam$Q14)/max(roster.exam$Q14))[which(roster.exam$Course==113)]
Q1516M112 = (100*(roster.exam$Q1516)/max(roster.exam$Q1516))[which(roster.exam$Course==112)]
Q1516M113 = (100*(roster.exam$Q1516)/max(roster.exam$Q1516))[which(roster.exam$Course==113)]
Q17M112 = (100*(roster.exam$Q17)/max(roster.exam$Q17))[which(roster.exam$Course==112)]
Q17M113 = (100*(roster.exam$Q17)/max(roster.exam$Q17))[which(roster.exam$Course==113)]
##########################
par(mfrow=c(1,3))
##########################   plot #1: 
plot(density(Q3M112), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q3M113), col="red", lty=2, lwd=1)
lines(density(Q45M112), col="blue", lty=1, lwd=2)
lines(density(Q45M113), col="blue", lty=2, lwd=1)
lines(density(Q67M112), col="darkcyan", lty=1, lwd=2)
lines(density(Q67M113), col="darkcyan", lty=2, lwd=1)
lines(density(Q89M112), col="purple4", lty=1, lwd=2)
lines(density(Q89M113), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q3", "M113-Q3","M112-Q45", "M113-Q45","M112-Q67", "M113-Q67","M112-Q89", "M113-Q89"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Overall", bty="n")
###
plot(density(Q10a2cM112), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q10a2cM113), col="red", lty=2, lwd=1)
lines(density(Q10d2fM112), col="blue", lty=1, lwd=2)
lines(density(Q10d2fM113), col="blue", lty=2, lwd=1)
lines(density(Q10g2iM112), col="darkcyan", lty=1, lwd=2)
lines(density(Q10g2iM113), col="darkcyan", lty=2, lwd=1)
lines(density(Q11M112), col="purple4", lty=1, lwd=2)
lines(density(Q11M113), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q10a2c", "M113-Q10a2c","M112-Q10d2f", "M113-Q10d2f","M112-Q10g2i", "M113-Q10g2i","M112-Q11", "M113-Q11"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Overall", bty="n")
###
###
plot(density(Q1213M112), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q1213M113), col="red", lty=2, lwd=1)
lines(density(Q14M112), col="blue", lty=1, lwd=2)
lines(density(Q14M113), col="blue", lty=2, lwd=1)
lines(density(Q1516M112), col="darkcyan", lty=1, lwd=2)
lines(density(Q1516M113), col="darkcyan", lty=2, lwd=1)
lines(density(Q17M112), col="purple4", lty=1, lwd=2)
lines(density(Q17M113), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q1213", "M113-Q1213","M112-Q14", "M113-Q14","M112-Q1516", "M113-Q1516","M112-Q17", "M113-Q17"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Overall", bty="n")
###
```

To help read the above density curves, we pick the density distributions of Q89 in MAT112 and MAT113 from the left panel of the above figure to explain the distributional difference between to two exam grades.

```{r fig.align='center', fig.width=3.5, fig.height=3.5, fig.pos="h", fig.cap="Topic-specific difference between MAT112 and MAT113: Questions 8 and 9."}
Q89M112 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==112)]
Q89M113 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==113)]
##
##########################   plot #1: 
plot(density(Q89M112), col="purple4", lty=1, lwd=3,  xlim=c(0,100), ylim=c(-0.0015,0.025), 
     xlab="Exam Grades", main="", axes=FALSE)
lab=c(0, 20, 40, 60, 80, 100)
axis(1, at =lab, labels = as.character(lab), cex=0.8, pos = 0)
axis(2)
lines(density(Q89M113), col="purple4", lty=2, lwd=2)
legend("topleft", c("M112-Q89", "M113-Q89"), col=c("purple4","purple4"), 
       lty=c(1,2), lwd=c(3,2), bty="n", cex=0.7)
#abline(v=c(37,75,87))
#arrows(37,0,37,0.0045, col="blue")
segments(37,0,37,0.0046, col="red")
segments(75,0,75,0.0088, col="red")
segments(87,0,87,0.0122, col="red")
points(c(37, 37, 75, 75, 87, 87), c(0, 0.0046, 0, 0.0088, 0, 0.0122), pch=20, col="red", cex = 0.8)
text(c(37,75,87), rep(-0.0015,3), c("37", "75", "87"), col="red", cex= 0.7)
```


As stated earlier, the grades Q89 were converted to the percentile. The above figure shows that,  

* the proportion of students who earned 37 or less in MAT112 was higher than that in MAT113
* the proportion of students who earned 87 or more in MAT112 was lower than that in MAT113
* the proportion of students who earned between 75 and 87 in MAT112 was about the same as that in MAT113
* the proportion of students who earned between 37 and 85 in MAT112 was lower than that in MAT113

The density curves of grades of individual questions in the above figures and the following instructor-specific density distributions can be similarly interpreted.


## Instructor and Question-Specific Distributions

The next four figures show the density curves of distributions of grades of individual questions earned by MAT112 and MAT113 students from individual instructors.  

### Instructor A

```{r fig.align='center', fig.width=8, fig.height=3, fig.cap="Topic-specific difference between MAT112 and MAT113: Instructor A"}
### Instr: #1
Q3M112.1 = (100*(roster.exam$Q3)/max(roster.exam$Q3))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q3M113.1 = (100*(roster.exam$Q3)/max(roster.exam$Q3))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
Q45M112.1 = (100*(roster.exam$Q45)/max(roster.exam$Q45))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q45M113.1 = (100*(roster.exam$Q45)/max(roster.exam$Q45))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
Q67M112.1 = (100*(roster.exam$Q67)/max(roster.exam$Q67))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q67M113.1 = (100*(roster.exam$Q67)/max(roster.exam$Q67))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
Q89M112.1 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q89M113.1 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
###
Q10a2cM112.1 = (100*(roster.exam$Q10a2c)/max(roster.exam$Q10a2c))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q10a2cM113.1 = (100*(roster.exam$Q10a2c)/max(roster.exam$Q10a2c))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
Q10d2fM112.1 = (100*(roster.exam$Q10d2f)/max(roster.exam$Q10d2f))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q10d2fM113.1 = (100*(roster.exam$Q10d2f)/max(roster.exam$Q10d2f))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
Q10g2iM112.1 = (100*(roster.exam$Q10g2i)/max(roster.exam$Q10g2i))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q10g2iM113.1 = (100*(roster.exam$Q10g2i)/max(roster.exam$Q10g2i))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
Q11M112.1 = (100*(roster.exam$Q11)/max(roster.exam$Q11))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q11M113.1 = (100*(roster.exam$Q11)/max(roster.exam$Q11))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
###
###
Q1213M112.1 = (100*(roster.exam$Q1213)/max(roster.exam$Q1213))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q1213M113.1 = (100*(roster.exam$Q1213)/max(roster.exam$Q1213))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
Q14M112.1 = (100*(roster.exam$Q14)/max(roster.exam$Q14))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q14M113.1 = (100*(roster.exam$Q14)/max(roster.exam$Q14))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
Q1516M112.1 = (100*(roster.exam$Q1516)/max(roster.exam$Q1516))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q1516M113.1 = (100*(roster.exam$Q1516)/max(roster.exam$Q1516))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
Q17M112.1 = (100*(roster.exam$Q17)/max(roster.exam$Q17))[which(roster.exam$Course==112 & roster.exam$InstrID==1)]
Q17M113.1 = (100*(roster.exam$Q17)/max(roster.exam$Q17))[which(roster.exam$Course==113 & roster.exam$InstrID==1)]
##########################
par(mfrow=c(1,3))
##########################   plot #1: 
plot(density(Q3M112.1), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q3M113.1), col="red", lty=2, lwd=1)
lines(density(Q45M112.1), col="blue", lty=1, lwd=2)
lines(density(Q45M113.1), col="blue", lty=2, lwd=1)
lines(density(Q67M112.1), col="darkcyan", lty=1, lwd=2)
lines(density(Q67M113.1), col="darkcyan", lty=2, lwd=1)
lines(density(Q89M112.1), col="purple4", lty=1, lwd=2)
lines(density(Q89M113.1), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q3", "M113-Q3","M112-Q45", "M113-Q45","M112-Q67", "M113-Q67","M112-Q89", "M113-Q89"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor A", bty="n")
###
plot(density(Q10a2cM112.1), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q10a2cM113.1), col="red", lty=2, lwd=1)
lines(density(Q10d2fM112.1), col="blue", lty=1, lwd=2)
lines(density(Q10d2fM113.1), col="blue", lty=2, lwd=1)
lines(density(Q10g2iM112.1), col="darkcyan", lty=1, lwd=2)
lines(density(Q10g2iM113.1), col="darkcyan", lty=2, lwd=1)
lines(density(Q11M112.1), col="purple4", lty=1, lwd=2)
lines(density(Q11M113.1), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q10a2c", "M113-Q10a2c","M112-Q10d2f", "M113-Q10d2f","M112-Q10g2i", "M113-Q10g2i","M112-Q11", "M113-Q11"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor A", bty="n")
###
###
plot(density(Q1213M112.1), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q1213M113.1), col="red", lty=2, lwd=1)
lines(density(Q14M112.1), col="blue", lty=1, lwd=2)
lines(density(Q14M113.1), col="blue", lty=2, lwd=1)
lines(density(Q1516M112.1), col="darkcyan", lty=1, lwd=2)
lines(density(Q1516M113.1), col="darkcyan", lty=2, lwd=1)
lines(density(Q17M112.1), col="purple4", lty=1, lwd=2)
lines(density(Q17M113.1), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q1213", "M113-Q1213","M112-Q14", "M113-Q14","M112-Q1516", "M113-Q1516","M112-Q17", "M113-Q17"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor A", bty="n")
###
```

### Instructor B

```{r fig.align='center', fig.width=8, fig.height=3, fig.cap="Topic-specific difference between MAT112 and MAT113: Instructor B"}
###############
#### Instr #2
Q3M112.2 = (100*(roster.exam$Q3)/max(roster.exam$Q3))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q3M113.2 = (100*(roster.exam$Q3)/max(roster.exam$Q3))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]
Q45M112.2 = (100*(roster.exam$Q45)/max(roster.exam$Q45))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q45M113.2 = (100*(roster.exam$Q45)/max(roster.exam$Q45))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]
Q67M112.2 = (100*(roster.exam$Q67)/max(roster.exam$Q67))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q67M113.2 = (100*(roster.exam$Q67)/max(roster.exam$Q67))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]
Q89M112.2 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q89M113.2 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]

###
Q10a2cM112.2 = (100*(roster.exam$Q10a2c)/max(roster.exam$Q10a2c))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q10a2cM113.2 = (100*(roster.exam$Q10a2c)/max(roster.exam$Q10a2c))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]
Q10d2fM112.2 = (100*(roster.exam$Q10d2f)/max(roster.exam$Q10d2f))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q10d2fM113.2 = (100*(roster.exam$Q10d2f)/max(roster.exam$Q10d2f))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]
Q10g2iM112.2 = (100*(roster.exam$Q10g2i)/max(roster.exam$Q10g2i))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q10g2iM113.2 = (100*(roster.exam$Q10g2i)/max(roster.exam$Q10g2i))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]
Q11M112.2 = (100*(roster.exam$Q11)/max(roster.exam$Q11))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q11M113.2 = (100*(roster.exam$Q11)/max(roster.exam$Q11))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]
###
Q1213M112.2 = (100*(roster.exam$Q1213)/max(roster.exam$Q1213))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q1213M113.2 = (100*(roster.exam$Q1213)/max(roster.exam$Q1213))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]
Q14M112.2 = (100*(roster.exam$Q14)/max(roster.exam$Q14))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q14M113.2 = (100*(roster.exam$Q14)/max(roster.exam$Q14))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]
Q1516M112.2 = (100*(roster.exam$Q1516)/max(roster.exam$Q1516))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q1516M113.2 = (100*(roster.exam$Q1516)/max(roster.exam$Q1516))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]
Q17M112.2 = (100*(roster.exam$Q17)/max(roster.exam$Q17))[which(roster.exam$Course==112 & roster.exam$InstrID==2)]
Q17M113.2 = (100*(roster.exam$Q17)/max(roster.exam$Q17))[which(roster.exam$Course==113 & roster.exam$InstrID==2)]

##########################
par(mfrow=c(1,3))
##########################   
plot(density(Q3M112.2), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q3M113.2), col="red", lty=2, lwd=1)
lines(density(Q45M112.2), col="blue", lty=1, lwd=2)
lines(density(Q45M113.2), col="blue", lty=2, lwd=1)
lines(density(Q67M112.2), col="darkcyan", lty=1, lwd=2)
lines(density(Q67M113.2), col="darkcyan", lty=2, lwd=1)
lines(density(Q89M112.2), col="purple4", lty=1, lwd=2)
lines(density(Q89M113.2), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q3", "M113-Q3","M112-Q45", "M113-Q45","M112-Q67", "M113-Q67","M112-Q89", "M113-Q89"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor B", bty="n")
###
plot(density(Q10a2cM112.2), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q10a2cM113.2), col="red", lty=2, lwd=1)
lines(density(Q10d2fM112.2), col="blue", lty=1, lwd=2)
lines(density(Q10d2fM113.2), col="blue", lty=2, lwd=1)
lines(density(Q10g2iM112.2), col="darkcyan", lty=1, lwd=2)
lines(density(Q10g2iM113.2), col="darkcyan", lty=2, lwd=1)
lines(density(Q11M112.2), col="purple4", lty=1, lwd=2)
lines(density(Q11M113.2), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q10a2c", "M113-Q10a2c","M112-Q10d2f", "M113-Q10d2f","M112-Q10g2i", "M113-Q10g2i","M112-Q11", "M113-Q11"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor B", bty="n")
###
###
plot(density(Q1213M112.2), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q1213M113.2), col="red", lty=2, lwd=1)
lines(density(Q14M112.2), col="blue", lty=1, lwd=2)
lines(density(Q14M113.2), col="blue", lty=2, lwd=1)
lines(density(Q1516M112.2), col="darkcyan", lty=1, lwd=2)
lines(density(Q1516M113.2), col="darkcyan", lty=2, lwd=1)
lines(density(Q17M112.2), col="purple4", lty=1, lwd=2)
lines(density(Q17M113.2), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q1213", "M113-Q1213","M112-Q14", "M113-Q14","M112-Q1516", "M113-Q1516","M112-Q17", "M113-Q17"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor B", bty="n")
###

```

\newpage

### Instructor C

```{r fig.align='center', fig.width=8, fig.height=3, fig.pos="h", fig.cap="Topic-specific difference between MAT112 and MAT113: Instructor C"}
########################
### Instr #3
Q3M112.3 = (100*(roster.exam$Q3)/max(roster.exam$Q3))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q3M113.3 = (100*(roster.exam$Q3)/max(roster.exam$Q3))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
Q45M112.3 = (100*(roster.exam$Q45)/max(roster.exam$Q45))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q45M113.3 = (100*(roster.exam$Q45)/max(roster.exam$Q45))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
Q67M112.3 = (100*(roster.exam$Q67)/max(roster.exam$Q67))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q67M113.3 = (100*(roster.exam$Q67)/max(roster.exam$Q67))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
Q89M112.3 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q89M113.3 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
###
Q10a2cM112.3 = (100*(roster.exam$Q10a2c)/max(roster.exam$Q10a2c))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q10a2cM113.3 = (100*(roster.exam$Q10a2c)/max(roster.exam$Q10a2c))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
Q10d2fM112.3 = (100*(roster.exam$Q10d2f)/max(roster.exam$Q10d2f))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q10d2fM113.3 = (100*(roster.exam$Q10d2f)/max(roster.exam$Q10d2f))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
Q10g2iM112.3 = (100*(roster.exam$Q10g2i)/max(roster.exam$Q10g2i))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q10g2iM113.3 = (100*(roster.exam$Q10g2i)/max(roster.exam$Q10g2i))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
Q11M112.3 = (100*(roster.exam$Q11)/max(roster.exam$Q11))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q11M113.3 = (100*(roster.exam$Q11)/max(roster.exam$Q11))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
###
Q1213M112.3 = (100*(roster.exam$Q1213)/max(roster.exam$Q1213))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q1213M113.3 = (100*(roster.exam$Q1213)/max(roster.exam$Q1213))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
Q14M112.3 = (100*(roster.exam$Q14)/max(roster.exam$Q14))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q14M113.3 = (100*(roster.exam$Q14)/max(roster.exam$Q14))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
Q1516M112.3 = (100*(roster.exam$Q1516)/max(roster.exam$Q1516))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q1516M113.3 = (100*(roster.exam$Q1516)/max(roster.exam$Q1516))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
Q17M112.3 = (100*(roster.exam$Q17)/max(roster.exam$Q17))[which(roster.exam$Course==112 & roster.exam$InstrID==3)]
Q17M113.3 = (100*(roster.exam$Q17)/max(roster.exam$Q17))[which(roster.exam$Course==113 & roster.exam$InstrID==3)]
###
##########################
par(mfrow=c(1,3))
##########################   
plot(density(Q3M112.3), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q3M113.3), col="red", lty=2, lwd=1)
lines(density(Q45M112.3), col="blue", lty=1, lwd=2)
lines(density(Q45M113.3), col="blue", lty=2, lwd=1)
lines(density(Q67M112.3), col="darkcyan", lty=1, lwd=2)
lines(density(Q67M113.3), col="darkcyan", lty=2, lwd=1)
lines(density(Q89M112.3), col="purple4", lty=1, lwd=2)
lines(density(Q89M113.3), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q3", "M113-Q3","M112-Q45", "M113-Q45","M112-Q67", "M113-Q67","M112-Q89", "M113-Q89"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor C", bty="n")
###
plot(density(Q10a2cM112.3), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q10a2cM113.3), col="red", lty=2, lwd=1)
lines(density(Q10d2fM112.3), col="blue", lty=1, lwd=2)
lines(density(Q10d2fM113.3), col="blue", lty=2, lwd=1)
lines(density(Q10g2iM112.3), col="darkcyan", lty=1, lwd=2)
lines(density(Q10g2iM113.3), col="darkcyan", lty=2, lwd=1)
lines(density(Q11M112.3), col="purple4", lty=1, lwd=2)
lines(density(Q11M113.3), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q10a2c", "M113-Q10a2c","M112-Q10d2f", "M113-Q10d2f","M112-Q10g2i", "M113-Q10g2i","M112-Q11", "M113-Q11"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor C", bty="n")
###
###
plot(density(Q1213M112.3), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.035), xlab="Exam Grades", main="")
lines(density(Q1213M113.3), col="red", lty=2, lwd=1)
lines(density(Q14M112.3), col="blue", lty=1, lwd=2)
lines(density(Q14M113.3), col="blue", lty=2, lwd=1)
lines(density(Q1516M112.3), col="darkcyan", lty=1, lwd=2)
lines(density(Q1516M113.3), col="darkcyan", lty=2, lwd=1)
lines(density(Q17M112.3), col="purple4", lty=1, lwd=2)
lines(density(Q17M113.3), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q1213", "M113-Q1213","M112-Q14", "M113-Q14","M112-Q1516", "M113-Q1516","M112-Q17", "M113-Q17"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor C", bty="n")
###
```

### Instructor D

```{r fig.align='center', fig.width=8, fig.height=3, fig.cap="Topic-specific difference between MAT112 and MAT113: Instructor D"}
###############
### Instr #4
Q3M112.4 = (100*(roster.exam$Q3)/max(roster.exam$Q3))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q3M113.4 = (100*(roster.exam$Q3)/max(roster.exam$Q3))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
Q45M112.4 = (100*(roster.exam$Q45)/max(roster.exam$Q45))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q45M113.4 = (100*(roster.exam$Q45)/max(roster.exam$Q45))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
Q67M112.4 = (100*(roster.exam$Q67)/max(roster.exam$Q67))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q67M113.4 = (100*(roster.exam$Q67)/max(roster.exam$Q67))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
Q89M112.4 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q89M113.4 = (100*(roster.exam$Q89)/max(roster.exam$Q89))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
###
Q10a2cM112.4 = (100*(roster.exam$Q10a2c)/max(roster.exam$Q10a2c))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q10a2cM113.4 = (100*(roster.exam$Q10a2c)/max(roster.exam$Q10a2c))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
Q10d2fM112.4 = (100*(roster.exam$Q10d2f)/max(roster.exam$Q10d2f))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q10d2fM113.4 = (100*(roster.exam$Q10d2f)/max(roster.exam$Q10d2f))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
Q10g2iM112.4 = (100*(roster.exam$Q10g2i)/max(roster.exam$Q10g2i))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q10g2iM113.4 = (100*(roster.exam$Q10g2i)/max(roster.exam$Q10g2i))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
Q11M112.4 = (100*(roster.exam$Q11)/max(roster.exam$Q11))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q11M113.4 = (100*(roster.exam$Q11)/max(roster.exam$Q11))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
###
Q1213M112.4 = (100*(roster.exam$Q1213)/max(roster.exam$Q1213))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q1213M113.4 = (100*(roster.exam$Q1213)/max(roster.exam$Q1213))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
Q14M112.4 = (100*(roster.exam$Q14)/max(roster.exam$Q14))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q14M113.4 = (100*(roster.exam$Q14)/max(roster.exam$Q14))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
Q1516M112.4 = (100*(roster.exam$Q1516)/max(roster.exam$Q1516))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q1516M113.4 = (100*(roster.exam$Q1516)/max(roster.exam$Q1516))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]
Q17M112.4 = (100*(roster.exam$Q17)/max(roster.exam$Q17))[which(roster.exam$Course==112 & roster.exam$InstrID==4)]
Q17M113.4 = (100*(roster.exam$Q17)/max(roster.exam$Q17))[which(roster.exam$Course==113 & roster.exam$InstrID==4)]

###
##########################
par(mfrow=c(1,3))
##########################   
plot(density(Q3M112.4), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.04), xlab="Exam Grades", main="")
lines(density(Q3M113.4), col="red", lty=2, lwd=1)
lines(density(Q45M112.4), col="blue", lty=1, lwd=2)
lines(density(Q45M113.4), col="blue", lty=2, lwd=1)
lines(density(Q67M112.4), col="darkcyan", lty=1, lwd=2)
lines(density(Q67M113.4), col="darkcyan", lty=2, lwd=1)
lines(density(Q89M112.4), col="purple4", lty=1, lwd=2)
lines(density(Q89M113.4), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q3", "M113-Q3","M112-Q45", "M113-Q45","M112-Q67", "M113-Q67","M112-Q89", "M113-Q89"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor D", bty="n")
###
plot(density(Q10a2cM112.4), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.04), xlab="Exam Grades", main="")
lines(density(Q10a2cM113.4), col="red", lty=2, lwd=1)
lines(density(Q10d2fM112.4), col="blue", lty=1, lwd=2)
lines(density(Q10d2fM113.4), col="blue", lty=2, lwd=1)
lines(density(Q10g2iM112.4), col="darkcyan", lty=1, lwd=2)
lines(density(Q10g2iM113.4), col="darkcyan", lty=2, lwd=1)
lines(density(Q11M112.4), col="purple4", lty=1, lwd=2)
lines(density(Q11M113.4), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q10a2c", "M113-Q10a2c","M112-Q10d2f", "M113-Q10d2f","M112-Q10g2i", "M113-Q10g2i","M112-Q11", "M113-Q11"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor D", bty="n")
###
###
plot(density(Q1213M112.4), col="red", lty=1, lwd=2,  xlim=c(0,100), ylim=c(0,0.04), xlab="Exam Grades", main="")
lines(density(Q1213M113.4), col="red", lty=2, lwd=1)
lines(density(Q14M112.4), col="blue", lty=1, lwd=2)
lines(density(Q14M113.4), col="blue", lty=2, lwd=1)
lines(density(Q1516M112.4), col="darkcyan", lty=1, lwd=2)
lines(density(Q1516M113.4), col="darkcyan", lty=2, lwd=1)
lines(density(Q17M112.4), col="purple4", lty=1, lwd=2)
lines(density(Q17M113.4), col="purple4", lty=2, lwd=1)
legend("topleft", c("M112-Q1213", "M113-Q1213","M112-Q14", "M113-Q14","M112-Q1516", "M113-Q1516","M112-Q17", "M113-Q17"),
       col=c("red","red","blue","blue","darkcyan","darkcyan","purple4","purple4"), lty=c(1,2,1,2,1,2,1,2),
       lwd=c(2,1,2,1,2,1,2,1), bty="n", cex=0.7)
legend("topright", "Instructor D", bty="n")
###
```


# Conclusions
As stated at the beginning of this report, the goal of this project is to assess the *net performance gain* of the one extra credit added to MAT112. The measurement used for this assessment was the exam grade of the common exam. Since various factors may affect the exam grade, we identified several key factors and used them to adjust the analysis to extract the net difference between exam grades in MAT112 and MAT113 (i.e., **net performance gain**).  

Some routine data processing and variable transformation/conversion were performed to remove some potentially sensitive information. The issue of sparse categories for some categorical variables was also handled to improve data quality. 

Descriptive methods and visual tools were used to identify potential factors that influence the exam scores. We also used linear regression models to extract the true difference of the mean exam scores between MAT112 and MAT113 (also called <font color = "red">*\color{red}\textbf{net-gain}*</font>) with adjustments due to other influential factors such as placement scores (PPL) and the instructors.

Key findings are summarized in the following.

* MAT112 students outperformed significantly MAT113 students. The *net performance gain* was about 11 points on a 100-point scale after the model was adjusted by factors such as PPL, instructor effect, etc.

* The math placement scores were positively correlated with the final exam scores ($p<0.05$). The strength of the correlation was weak (the correlation coefficient $r \approx 0.082$). 

* The average PPL score of MAT112 was significantly lower than that of MAT113 students, but the average exam score of MAT112 was significantly higher than that of MAT113.

* Instructor effect was significant in that it influenced the *net performance gain* substantially.

* ESL students(native language is not English) performed poorly than non-ESL students. 

* Other factors such as major and grade level had insignificant influence on the performance in the exam.

* Question-specific comparisons were not systematically performed but the relevant density curves of grade distributions were provided for potential further exploration.




